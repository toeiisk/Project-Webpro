{% extends "base_nav.html" %}
{% load static %}
{% block content %}
{% for rest in restaurant %}
<img src="{{ rest.picture.url }}" class="img-fluid detail-img mx-auto d-block shadow rounded
    my-5" alt="Responsive image" />
<br />
<div class="container text-center">
    <p class="text-center font-weight-bolder h2">{{ rest.name }}</p>
    <hr>
    <p class="font-weight-bolder h5">OPEN-CLOSE</p>
    <h5>{{ rest.open_time }} - {{ rest.close_time }}</h5><br>
    <p class="font-weight-bolder h5">OWNER</p>
    <h5>{{ rest.owner }}</h5><br>
    <p class="font-weight-bolder h5">RATING</p>
    <h5>{{ rest.rating }}</h5><br>
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">รายการอาหาร</th>
                <th scope="col">ราคา</th>
                <th scope="col">VEGAN</th>
                {% if request.user.is_superuser %}
                <th scope="col">ADMIN</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for food in restaurantfood %}
            <tr>
                <td>{{food.food_id.name}}</td>
                <td>{{food.price}}</td>
                <td>{{food.food_id.is_vegan}}</td>
                <td>
                    {% if request.user.is_superuser %}
                    <a href="{% url 'food_delete' food_id=food.food_id.id %}"
                        onclick="return confirm('Are you sure you want to delete this?')">
                        <div class="btn btn-danger" id="{{food.food_id.id}}">DELETE</div>
                    </a>
                    <a href="{% url 'food_list' food_id=food.food_id.id %}" class="btn btn-secondary">EDIT</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <form method="POST" action="{% url 'rating_score' %}">
        {% csrf_token %}
        <div class="form-group row my-5">
            <label for="score" class="h4 mx-2 col">Give Score For Restaurant</label>
            <select class="form mx-2 col" id="score" name="score">
                <option name="score" value=1>&#9733;</option>
                <option name="score" value=2>&#9733;&#9733;</option>
                <option name="score" value=3>&#9733;&#9733;&#9733;</option>
                <option name="score" value=4>&#9733;&#9733;&#9733;&#9733;</option>
                <option name="score" value=5>&#9733;&#9733;&#9733;&#9733;&#9733;</option>
            </select>
            <button class="btn btn-success mx-2 col" type="submit">SUBMIT</button>
            {% for rest in restaurant %}
                <input type="hidden" value="{{rest.id}}" name="rest_id">
            {% endfor %}
        </div>
    </form>

    {% if request.user.is_superuser %}
    <hr class="m-5">
    <p class="h4 text-center font-weight-bolder">Delete and Edit this page.</p>
    <a href="{% url 'restaurant_delete' restaurant_id=rest.id %}"
        onclick="return confirm('Are you sure you want to delete this?')">
        <div class="btn btn-danger mb-5" id="{{rest.id}}">DELETE</div>
    </a>
    <a href="{% url 'restaurant_list' restaurant_id=rest.id %}" class="btn btn-secondary mb-5">EDIT</a>
    {% endif %}
</div>
{% endfor %}
{% endblock %}